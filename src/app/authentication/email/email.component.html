<!DOCTYPE html>

<form [formGroup]="userForm" *ngIf="newUser" (ngSubmit)="login()" #loginForm="ngForm">
    <div class="row">
        <mz-input-container class="col s12">
            <i mz-icon-mdi mz-input-prefix [icon]="'email'" class="grey-text text-darken-2"></i>
            <input mz-input mz-validation [label]="'Email'" [validate]="true" [errorMessageResource]="errorMessages.email" #emailLogin id="email-login" type="email" formControlName="email">
        </mz-input-container>
    </div>
    <div class="row">
        <mz-input-container class="col s12">
            <i mz-icon-mdi mz-input-prefix [icon]="'lock'" class="grey-text text-darken-2"></i>
            <input mz-input mz-validation [label]="'Password'" [validate]="true" [errorMessageResource]="errorMessages.password" id="password-login" type="password" formControlName="password">
            <a *ngIf="userForm.value.email.length >= 1" class="help is-info" (click)="resetPassword()">Send password reset for {{userForm.value.email}}?</a>
        </mz-input-container>
    </div>
    <div class="row">
        <div class="col s12">
            <button class="btn btn-sm btn-secondary" type="submit" [disabled]="!userForm.valid">Sign-In</button>
            <button class="btn btn-flat" (click)="toggleForm();">New user?</button>
        </div>
    </div>
</form>

<form [formGroup]="userForm" *ngIf="!newUser" (ngSubmit)="signup()">
    <div class="row">
        <mz-input-container class="col s12">
            <i mz-icon-mdi mz-input-prefix [icon]="'email'" class="grey-text text-darken-2"></i>
            <input mz-input mz-validation [label]="'Email'" [validate]="true" [errorMessageResource]="errorMessages.email" id="email-signup" type="email" formControlName="email">
        </mz-input-container>
    </div>
    <div class="row">
        <mz-input-container class="col s12">
            <i mz-icon-mdi mz-input-prefix [icon]="'lock'" class="grey-text text-darken-2"></i>
            <input mz-input mz-validation [label]="'Password'" [validate]="true" [errorMessageResource]="errorMessages.password" id="password-signup" type="password" formControlName="password">
        </mz-input-container>
    </div>
    <div class="row">
        <div class="col s12">
            <button type="submit" class="btn btn-sm btn-secondary" [disabled]="!userForm.valid">Sign-Up</button>
            <button class="btn btn-flat" (click)="toggleForm();">Already registered?</button>
        </div>
    </div>
</form>
